# The covariance matrix for noise on velocity
Qc:
  rows: 6
  cols: 6
  data: [0.1, 0, 0, 0, 0, 0,
         0, 0.1, 0, 0, 0, 0,
         0, 0, 1, 0, 0, 0,
         0, 0, 0, 10, 0, 0,
         0, 0, 0, 0, 10, 0,
         0, 0, 0, 0, 0, 10]

  # The information matrix for the previous step's twist
Prior_twist:
  rows: 6
  cols: 6
  data: [1, 0, 0, 0, 0, 0,
         0, 1, 0, 0, 0, 0,
         0, 0, 1, 0, 0, 0,
         0, 0, 0, 1, 0, 0,
         0, 0, 0, 0, 1, 0,
         0, 0, 0, 0, 0, 1]

# How many states per revolution to optimize over, there must be at minimum two.
num_trajectory_states: 2
n_window: 3 # Number of scans to optimize over. Must be at least 2
opt_iters: 2  # how many iterations of the matcher to run
max_inner_iters: 200 # limit on iterations of ceres at each matcher iteration
diff_tol: 1e-4 # norm of solution difference for stopping criteria
solver_threads: 4 # number of threads the solver should use
robust_param: 0.25 # Parameter used in tukey loss function
max_correspondence_dist: 2  #  correspondences greater than this are discarded
max_residual_val: 1        #  Residuals with an initial error greater than this are not used.
min_residuals: 30          #  Problem will be reset if the number of residuals is less than this
local_map_range: 10000  #  Maximum range of features to keep. square metres

#  Sensor parametersjectory
scan_period: 0.1  #  Seconds
max_ticks: 36000    #  encoder ticks per revolution
n_ring: 32       #  number of laser-detector pairs

#  one degree. Beam spacing is 1.33deg, so this should be sufficient
elevation_tol: 0.01   #  Minimum elevation difference across correspondences at a range of 10m (inversely proportional to range)
TTL: 1             #  Maximum life of feature in local map with no correspondences
iso_var: 0.005       #  Variance to use if weighing is set.

min_eigen: 100
max_extrapolation: 0.0 # How far to extrapolate line correspondences

#Parameters controlling how planar feature tracks are merged
max_planar_dist_threshold: 3
max_planar_ang_threshold: 0.1  # 1 - cos(theta)
#Parameters controlling how line feature tracks are merged
max_linear_dist_threshold: 0.1
max_linear_ang_threshold: 0.025
ang_scaling_param: 10

#  Setting flags
only_extract_features: false   #  If set, no transforms are calculated
use_weighting: false           #  If set, pre-whiten residuals
print_opt_sum: true              #  If true, output ceres summaries to console
check_gradients: false         #  If set, use Ceres gradient checker on each jacobians
limit_rng_var: false
limit_int_var: false